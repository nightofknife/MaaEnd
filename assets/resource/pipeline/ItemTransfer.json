{
    "ItemTransfer": {
        "recognition": "DirectHit",
        "next": [
            "ItemTransferStart",
            "[JumpBack]ItemTransferOpenDijiangRepository",
            "[JumpBack]ItemTransferSelectDijiang",
            "[JumpBack]ItemTransferWaitLoadingColor",
            "[JumpBack]ItemTransferTeleport",
            "[JumpBack]ItemTransferSelectDijiangTeleport",
            "[JumpBack]ItemTransferOpenMap"
        ]
    },
    "ItemTransferStart": {
        "recognition": "OCR",
        "roi": [
            182,
            125,
            160,
            39
        ],
        "expected": "仓库",
        "next": [
            "SwitchRepoToOrigin"
        ]
    },
    "SwitchRepoToOrigin": {
        "recognition": "OCR",
        "roi": [
            607,
            128,
            65,
            24
        ],
        "expected": "仓库切换",
        "action": "Click",
        "post_wait_freezes": 1,
        "next": [
            "ClickOrigin",
            "SwitchRepoToOrigin"
        ]
    },
    "ClickOrigin": {
        "recognition": "OCR",
        "roi": [
            515,
            158,
            481,
            393
        ],
        "expected": "ORIGIN_REGION",
        "action": "Click",
        "post_wait_freezes": 1,
        "next": [
            "ClickConfirmOrigin",
            "AtOrigin"
        ]
    },
    "ClickConfirmOrigin": {
        "recognition": "OCR",
        "roi": [
            991,
            560,
            117,
            41
        ],
        "expected": "确认",
        "action": "Click",
        "post_wait_freezes": 1,
        "next": [
            "AtOrigin"
        ]
    },
    "AtOrigin": {
        "recognition": "OCR",
        "roi": [
            991,
            560,
            117,
            41
        ],
        "expected": "已连接",
        "next": [
            "ClickEscOrigin"
        ]
    },
    "ClickEscOrigin": {
        "action": "ClickKey",
        "key": 27,
        "post_wait_freezes": 1,
        "next": [
            "RepoToBag"
        ]
    },
    "RepoToBag": {
        "post_wait_freezes": 1,
        "next": [
            "ClickSortDescending",
            "ClickItemCategory",
            "FindItemInRepo",
            "ScrollDownwardRepo"
        ]
    },
    "ClickSortDescending": {
        "recognition": "OCR",
        "roi": [
            371,
            505,
            48,
            26
        ],
        "expected": "降序",
        "action": "Click",
        "post_wait_freezes": 1,
        "next": [
            "ClickItemCategory",
            "FindItemInRepo",
            "ScrollDownwardRepo"
        ]
    },
    "ClickSortAscending": {
        "recognition": "OCR",
        "roi": [
            371,
            505,
            48,
            26
        ],
        "expected": "升序",
        "action": "Click",
        "post_wait_freezes": 1,
        "next": [
            "ClickItemCategory",
            "FindItemInRepo",
            "ScrollDownwardRepo"
        ]
    },
    "ClickItemCategory": {
        "recognition": "TemplateMatch",
        "roi": [
            168,
            171,
            531,
            35
        ],
        "template": "ItemTransfer/全部.png",
        "threshold": 0.8,
        "order_by": "Score",
        "action": "Click",
        "post_wait_freezes": 1,
        "next": [
            "FindItemInRepo",
            "ScrollDownwardRepo"
        ]
    },
    "FindItemInRepo": {
        "recognition": "TemplateMatch",
        "roi": [
            158,
            203,
            551,
            292
        ],
        "template": "Common/Items/{ItemName}.png",
        "threshold": 0.85,
        "order_by": "Score",
        "method": 3,
        "next": [
            "CtrlKeyDownRepo"
        ]
    },
    "ScrollDownwardRepo": {
        "action": "Swipe",
        "begin": [
            640,
            455
        ],
        "end": [
            640,
            248
        ],
        "end_hold": 500,
        "max_hit": 3,
        "post_wait_freezes": 1,
        "next": [
            "FindItemInRepo",
            "ScrollDownwardRepo",
            "ScrollUpwardRepo"
        ]
    },
    "ScrollUpwardRepo": {
        "doc": "触底后回顶",
        "action": "Swipe",
        "begin": [
            640,
            248
        ],
        "end": [
            640,
            455
        ],
        "end_hold": 500,
        "max_hit": 3,
        "post_wait_freezes": 1,
        "next": [
            "FindItemInRepo",
            "ScrollUpwardRepo"
        ],
        "focus": {
            "Node.NextList.Failed": "$task.ItemTransfer.item_not_found"
        }
    },
    "CtrlKeyDownRepo": {
        "action": "KeyDown",
        "key": 17,
        "next": [
            "TransferToBag"
        ]
    },
    "TransferToBag": {
        "target": "FindItemInRepo",
        "action": "Click",
        "next": [
            "CtrlKeyUpRepo"
        ]
    },
    "CtrlKeyUpRepo": {
        "action": "KeyUp",
        "key": 17,
        "next": [
            "SwitchRepoToDestination"
        ]
    },
    "SwitchRepoToDestination": {
        "recognition": "OCR",
        "roi": [
            607,
            128,
            65,
            24
        ],
        "expected": "仓库切换",
        "action": "Click",
        "post_wait_freezes": 1,
        "next": [
            "ClickDestination",
            "SwitchRepoToDestination"
        ]
    },
    "ClickDestination": {
        "recognition": "OCR",
        "roi": [
            515,
            158,
            481,
            393
        ],
        "expected": "DESTINATION_REGION",
        "action": "Click",
        "post_wait_freezes": 1,
        "next": [
            "ClickConfirmDestination",
            "AtDestination"
        ]
    },
    "ClickConfirmDestination": {
        "recognition": "OCR",
        "roi": [
            991,
            560,
            117,
            41
        ],
        "expected": "确认",
        "action": "Click",
        "post_wait_freezes": 1,
        "next": [
            "AtDestination"
        ]
    },
    "AtDestination": {
        "recognition": "OCR",
        "roi": [
            991,
            560,
            117,
            41
        ],
        "expected": "已连接",
        "next": [
            "ClickEscDestination"
        ]
    },
    "ClickEscDestination": {
        "action": "ClickKey",
        "key": 27,
        "post_wait_freezes": 1,
        "next": [
            "BagToRepo"
        ]
    },
    "BagToRepo": {
        "post_wait_freezes": 1,
        "next": [
            "FindItemInBag",
            "ScrollDownwardBag"
        ]
    },
    "FindItemInBag": {
        "recognition": "TemplateMatch",
        "roi": [
            768,
            209,
            349,
            285
        ],
        "template": "Common/Items/{ItemName}.png",
        "threshold": 0.85,
        "order_by": "Score",
        "method": 3,
        "next": [
            "CtrlKeyDownBag"
        ]
    },
    "ScrollDownwardBag": {
        "action": "Swipe",
        "begin": [
            837,
            472
        ],
        "end": [
            837,
            228
        ],
        "end_hold": 500,
        "max_hit": 3,
        "post_wait_freezes": 1,
        "next": [
            "FindItemInBag",
            "ScrollDownwardBag",
            "ScrollUpwardBag"
        ]
    },
    "ScrollUpwardBag": {
        "doc": "触底后回顶",
        "action": "Swipe",
        "begin": [
            837,
            228
        ],
        "end": [
            837,
            472
        ],
        "end_hold": 500,
        "max_hit": 3,
        "post_wait_freezes": 1,
        "next": [
            "FindItemInBag",
            "ScrollUpwardBag"
        ]
    },
    "CtrlKeyDownBag": {
        "action": "KeyDown",
        "key": 17,
        "next": [
            "TransferToRepo"
        ]
    },
    "TransferToRepo": {
        "target": "FindItemInBag",
        "action": "Click",
        "next": [
            "CtrlKeyUpBag"
        ]
    },
    "CtrlKeyUpBag": {
        "action": "KeyUp",
        "key": 17,
        "next": [
            "CheckIfFull",
            "ItemTransferStart",
            "Stop"
        ]
    },
    "CheckIfFull": {
        "recognition": "OCR",
        "roi": [
            493,
            112,
            291,
            20
        ],
        "expected": "已满",
        "next": [
            "SwitchRepoToOriginReturn"
        ]
    },
    "SwitchRepoToOriginReturn": {
        "recognition": "OCR",
        "roi": [
            607,
            128,
            65,
            24
        ],
        "expected": "仓库切换",
        "action": "Click",
        "post_wait_freezes": 1,
        "next": [
            "ClickOriginReturn",
            "SwitchRepoToOriginReturn"
        ]
    },
    "ClickOriginReturn": {
        "recognition": "OCR",
        "roi": [
            515,
            158,
            481,
            393
        ],
        "expected": "ORIGIN_REGION",
        "action": "Click",
        "post_wait_freezes": 1,
        "next": [
            "ClickConfirmOriginReturn",
            "AtOriginReturn"
        ]
    },
    "ClickConfirmOriginReturn": {
        "recognition": "OCR",
        "roi": [
            991,
            560,
            117,
            41
        ],
        "expected": "确认",
        "action": "Click",
        "post_wait_freezes": 1,
        "next": [
            "AtOriginReturn"
        ]
    },
    "AtOriginReturn": {
        "recognition": "OCR",
        "roi": [
            991,
            560,
            117,
            41
        ],
        "expected": "已连接",
        "next": [
            "ClickEscOriginReturn"
        ]
    },
    "ClickEscOriginReturn": {
        "action": "ClickKey",
        "key": 27,
        "post_wait_freezes": 1,
        "next": [
            "BagToOriginRepo"
        ]
    },
    "BagToOriginRepo": {
        "post_wait_freezes": 1,
        "next": [
            "FindItemInBagReturn",
            "ScrollDownwardBagReturn"
        ]
    },
    "FindItemInBagReturn": {
        "recognition": "TemplateMatch",
        "roi": [
            768,
            209,
            349,
            285
        ],
        "template": "Common/Items/{ItemName}.png",
        "threshold": 0.85,
        "order_by": "Score",
        "method": 3,
        "next": [
            "CtrlKeyDownBagReturn"
        ]
    },
    "ScrollDownwardBagReturn": {
        "action": "Swipe",
        "begin": [
            837,
            472
        ],
        "end": [
            837,
            228
        ],
        "end_hold": 500,
        "max_hit": 3,
        "post_wait_freezes": 1,
        "next": [
            "FindItemInBagReturn",
            "ScrollDownwardBagReturn",
            "ScrollUpwardBagReturn"
        ]
    },
    "ScrollUpwardBagReturn": {
        "doc": "触底后回顶",
        "action": "Swipe",
        "begin": [
            837,
            228
        ],
        "end": [
            837,
            472
        ],
        "end_hold": 500,
        "max_hit": 3,
        "post_wait_freezes": 1,
        "next": [
            "FindItemInBagReturn",
            "ScrollUpwardBagReturn"
        ]
    },
    "CtrlKeyDownBagReturn": {
        "action": "KeyDown",
        "key": 17,
        "next": [
            "TransferToRepoReturn"
        ]
    },
    "TransferToRepoReturn": {
        "target": "FindItemInBagReturn",
        "action": "Click",
        "next": [
            "CtrlKeyUpBagReturn"
        ]
    },
    "CtrlKeyUpBagReturn": {
        "action": "KeyUp",
        "key": 17,
        "focus": {
            "Node.Action.Succeeded": "$task.ItemTransfer.bag_return_completed"
        }
    },
    "Stop": {
        "action": "StopTask"
    },
    "ItemTransferOpenMap": {
        "recognition": {
            "type": "Or",
            "param": {
                "any_of": [
                    {
                        "recognition": {
                            "type": "TemplateMatch",
                            "param": {
                                "template": "Resell/inGame1.png",
                                "threshold": 0.8,
                                "roi": [
                                    172,
                                    0,
                                    183,
                                    119
                                ]
                            }
                        }
                    },
                    {
                        "recognition": {
                            "type": "TemplateMatch",
                            "param": {
                                "template": "Resell/inGame2.png",
                                "threshold": 0.8,
                                "roi": [
                                    1182,
                                    0,
                                    98,
                                    128
                                ]
                            }
                        }
                    }
                ]
            }
        },
        "action": {
            "type": "ClickKey",
            "param": {
                "key": 77
            }
        }
    },
    "ItemTransferSelectDijiangTeleport": {
        "post_wait_freezes": {
            "time": 200,
            "timeout": 2000
        },
        "recognition": {
            "type": "And",
            "param": {
                "box_index": 1,
                "all_of": [
                    {
                        "sub_name": "_DijiangBridge",
                        "recognition": {
                            "type": "TemplateMatch",
                            "param": {
                                "roi": [
                                    17,
                                    38,
                                    1236,
                                    640
                                ],
                                "template": [
                                    "ClaimDijiangRewards/DijiangBridge.png"
                                ]
                            }
                        }
                    },
                    {
                        "recognition": {
                            "type": "TemplateMatch",
                            "param": {
                                "roi": "_DijiangBridge",
                                "roi_offset": [
                                    130,
                                    -10,
                                    60,
                                    20
                                ],
                                "template": [
                                    "ClaimDijiangRewards/DijiangTeleport.png"
                                ]
                            }
                        }
                    }
                ]
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "ItemTransferTeleport": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    1181,
                    611,
                    94,
                    102
                ],
                "template": [
                    "Common/Button/TeleportButton.png",
                    "Common/Button/TeleportButtonHover.png"
                ]
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "ItemTransferWaitLoadingColor": {
        "recognition": {
            "type": "And",
            "param": {
                "all_of": [
                    {
                        "recognition": {
                            "type": "ColorMatch",
                            "param": {
                                "roi": [
                                    0,
                                    462,
                                    124,
                                    226
                                ],
                                "upper": [
                                    128,
                                    127,
                                    0
                                ],
                                "lower": [
                                    128,
                                    127,
                                    0
                                ]
                            }
                        }
                    },
                    {
                        "recognition": {
                            "type": "ColorMatch",
                            "param": {
                                "roi": [
                                    0,
                                    462,
                                    124,
                                    226
                                ],
                                "upper": [
                                    0,
                                    127,
                                    127
                                ],
                                "lower": [
                                    0,
                                    127,
                                    127
                                ]
                            }
                        }
                    },
                    {
                        "recognition": {
                            "type": "ColorMatch",
                            "param": {
                                "roi": [
                                    0,
                                    462,
                                    124,
                                    226
                                ],
                                "upper": [
                                    128,
                                    0,
                                    127
                                ],
                                "lower": [
                                    128,
                                    0,
                                    127
                                ]
                            }
                        }
                    }
                ]
            }
        }
    },
    "ItemTransferSelectDijiang": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    1052,
                    0,
                    228,
                    196
                ],
                "expected": [
                    "[Oo].?[Mm].?[Vv]"
                ]
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "ItemTransferOpenDijiangRepository": {
        "doc": "从帝江号开仓库,适用于PC,adb请改键。",
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    247,
                    0,
                    172,
                    77
                ],
                "template": [
                    "ClaimDijiangRewards/ControlNexus.png",
                    "ClaimDijiangRewards/ControlNexusWithTips.png"
                ]
            }
        },
        "action": {
            "type": "ClickKey",
            "param": {
                "key": 66 // Key B
            }
        }
    }
}
